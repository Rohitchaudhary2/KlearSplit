<h2 mat-dialog-title class="text-center">Add Expense</h2>
<div
  mat-dialog-content
  class="d-flex flex-column align-items-center p-4"
  style="max-height: 70vh; overflow-y: auto"
>
  <form [formGroup]="form" class="w-100">
    <div class="mb-3">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Expense Name</mat-label>
        <input
          matInput
          formControlName="expense_name"
          style="background-color: transparent"
        />
        @if (form.controls["expense_name"].invalid) {
          <mat-error>Expense Name is required.</mat-error>
        }
      </mat-form-field>
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Total Amount</mat-label>
        <input
          matInput
          type="number"
          formControlName="total_amount"
          style="background-color: transparent"
          step="0.01"
          min="0"
          max="999999999999.99"
        />
        <mat-hint>Enter a decimal value</mat-hint>
        @if (form.controls["total_amount"].invalid) {
          <mat-error>Amount is required.</mat-error>
        }
      </mat-form-field>
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Description</mat-label>
        <input
          matInput
          formControlName="description"
          style="background-color: transparent"
        />
        @if (form.controls["description"].invalid) {
          <mat-error>Description can have at max 150 characters.</mat-error>
        }
      </mat-form-field>
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Payer</mat-label>
        <mat-select formControlName="payer_id">
          <mat-option [value]="participants[0].user_id"
            >{{ participants[0].first_name }}
            {{ participants[0].last_name }}</mat-option
          >
          <mat-option [value]="participants[1].user_id"
            >{{ participants[1].first_name }}
            {{ participants[1].last_name }}</mat-option
          >
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>Split Type</mat-label>
        <mat-select formControlName="split_type">
          <mat-option value="EQUAL">EQUAL</mat-option>
          <mat-option value="UNEQUAL">UNEQUAL</mat-option>
          <mat-option value="PERCENTAGE">PERCENTAGE</mat-option>
        </mat-select>
      </mat-form-field>
      @if (showAdditionalFields()) {
        <mat-form-field appearance="fill" class="w-100">
          <mat-label
            >{{ participants[0].first_name }} {{ participants[0].last_name }}'s
            share</mat-label
          >
          <input
            matInput
            type="number"
            name="participant1_share"
            formControlName="participant1_share"
            style="background-color: transparent"
            step="0.01"
            min="0"
            max="999999999999.99"
          />
        </mat-form-field>
        <mat-form-field appearance="fill" class="w-100">
          <mat-label
            >{{ participants[1].first_name }} {{ participants[1].last_name }}'s
            share</mat-label
          >
          <input
            matInput
            type="number"
            name="participant2_share"
            formControlName="participant2_share"
            style="background-color: transparent"
            step="0.01"
            min="0"
            max="999999999999.99"
          />
        </mat-form-field>
      }
      <div class="input-group mb-3">
        <input
          type="file"
          name="image"
          (change)="selectImage($event)"
          class="form-control"
          id="inputGroupFile02"
        />
        <label class="input-group-text" for="inputGroupFile02"
          >Upload Bill Receipt</label
        >
      </div>
    </div>
  </form>
</div>
<div mat-dialog-actions class="d-flex justify-content-end gap-2 px-3">
  <button
    mat-button
    disableRipple
    class="custom-mat-button"
    (click)="onCancel()"
  >
    Cancel
  </button>
  <button
    mat-button
    disableRipple
    class="custom-mat-button"
    (click)="onAdd()"
    [disabled]="form.invalid"
  >
    Add
  </button>
</div>
