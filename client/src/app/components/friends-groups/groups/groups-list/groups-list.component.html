<div class="transparent subcontainer d-flex flex-column">
  <!-- search container -->
  <app-search-bar
    placeholder="Search using group name"
    actionButtonIcon="group_add"
    actionButtonTitle="Create Group"
    (searchChange)="onSearchChange($event)"
    (actionButtonClick)="onCreateGroupClick()"
  />

  <!-- pending group invites -->
  <app-list-display
    heading="Group Invites"
    [items]="invites()"
    (acceptReject)="onAcceptReject($event)"
    (selectedGroup)="onSelectGroup($event)"
  ></app-list-display>

  <!-- Groups List -->
  <div class="friend-list d-flex flex-column shadow-lg mt-3 mx-3 flex-grow-1">
    <div class="friend-request=heading">
      <h6 class="m-0" style="padding-left: 1.5rem; padding-top: 0.2rem;">
        Group List
      </h6>
      <hr class="m-0 mt-1" />
    </div>
    <div class="friends">
      <table class="table table-hover">
        <thead>
          <tr style="display: none;">
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          @for (group of groupList(); track $index) {
            <tr
              class="row equal-height-row d-flex justify-content-between m-0"
              [ngClass]="{'selected': currentGroup() === group}"
              style="cursor: pointer"
              (click)="onSelectGroup(group)"
              (keyup.enter)="onSelectGroup(group)"
            >
              <td
                class="col-md-3 col-lg-2 col-sm-3"
                style="
                  flex: 0 0 auto;
                  text-align: center;
                  align-content: center;
                "
              >
                <span
                  ><img
                    class="profile-image"
                    [src]="group.image_url || '/group-profile.png'"
                    alt="group"
                /></span>
              </td>
              <td class="col-md-9 col-lg-10 col-sm-9">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex flex-row">
                    <span
                      >{{ group.group_name }}</span
                    >
                    @if (group.has_blocked) {
                      <span class="text-danger ps-2">
                        <mat-icon>block</mat-icon>
                      </span>
                    }
                  </div>
                  <span
                    class="text-end pe-3"
                    [class.text-danger]="
                      getBalanceAsNumber(group.balance_amount) < 0
                    "
                    [class.text-success]="
                      getBalanceAsNumber(group.balance_amount) >= 0
                    "
                  >
                    {{
                      getBalanceAsNumber(group.balance_amount)
                        | absoluteValue
                        | currency: "INR"
                    }}
                  </span>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
