<div class="group-details-container">
  <!-- Group Info Section -->
  <div class="group-header">
    <img
      [src]="selectedGroup.image_url ?? '/group-profile.png'"
      alt="{{ selectedGroup.group_name }}"
      class="group-profile-pic"
    />
    <span class="group-info">
      <h2 class="group-name">{{ selectedGroup.group_name }}</h2>
      <p class="group-description">{{ selectedGroup.group_description }}</p>
    </span>
    <span class="user-balance d-flex justify-content-between">
      <h3>Your Balance:
        <span
          [class.text-danger]="getBalanceAsNumber(selectedGroup.balance_amount) < 0"
          [class.text-success]="getBalanceAsNumber(selectedGroup.balance_amount) >= 0">{{
          getBalanceAsNumber(selectedGroup.balance_amount)
            | absoluteValue | currency: "INR"
        }}</span>
      </h3>
    </span>
  </div>

  <!-- User Balance -->

  <!-- Members List -->
  <div class="members-list">
    <div class="d-flex align-items-center">
      <h3>Group Members</h3>
    </div>
    <div class="members-table">
      <!-- Table Header -->
      <div class="table-row table-header row">
        <div class="table-cell member-cell col-4">Member</div>
        <div class="table-cell col-2">Role</div>
        <div class="table-cell col-3">Balance with You</div>
        <div class="table-cell col-3">Total Balance in Group</div>
      </div>

      <!-- Table Body -->
      @for (member of groupMembers; track $index) {
        <div
          class="table-row row"
        >
          <div class="table-cell member-cell col-4">
            <div class="member-details">
              <img
                [src]="member.image_url || '/profile.png'"
                alt="Profile Picture"
                class="member-profile-pic"
              />
              <span class="member-name">
                {{ member.first_name }} {{ member.last_name || "" }}
              </span>
              @if (member.deletedAt) {
                <span class="text-danger">(Left)</span>
              }
            </div>
          </div>
          <div class="table-cell col-2">{{ member.role }}</div>
          <div class="table-cell col-3">
            @if (member.deletedAt || member.member_id === currentUserId) {
              <span>--</span>
            } @else {
              <span
                [class.text-success]="getBalanceAsNumber(member.balance_with_user) < 0"
                [class.text-danger]="getBalanceAsNumber(member.balance_with_user) >= 0"
              >{{
                getBalanceAsNumber(member.balance_with_user)
                  | absoluteValue | currency: "INR"
              }}</span>
            }
          </div>
          <div class="table-cell col-3">
            @if (member.deletedAt) {
              <span>--</span>
            } @else {
              <span
                  [class.text-danger]="getBalanceAsNumber(member.balance_with_user) < 0"
                  [class.text-success]="getBalanceAsNumber(member.balance_with_user) >= 0"
                >{{
                  getBalanceAsNumber(member.balance_with_user)
                    | absoluteValue | currency: "INR"
                }}</span>
            }
          </div>
        </div>
      }
    </div>
  </div>
</div>
